import{createMemoryHistory as e,parsePath as t}from"history";import n from"react";function r(e,t){if(!e)throw Error(t)}let l=n.createContext(null),u=n.createContext({outlet:null,params:{},pathname:"",route:null});function a(){return f()}let i=e=>e(),o=n.useTransition||(()=>[i,!1]);function c({children:e=null,history:t,timeout:u=2e3}){let[a,i]=n.useState(t.location),[c,s]=o({timeoutMs:u});return u=n.useRef(!0),n.useContext(l)&&r(!1),u.current&&(u.current=!1,t.listen(({location:e})=>{c(()=>{i(e)})})),n.createElement(l.Provider,{children:e,value:{history:t,location:a,pending:s}})}function s(e){let t=[];return n.Children.forEach(e,e=>{if(n.isValidElement(e)){var{children:r,path:l="/"}=e.props;if(e.type===n.Fragment)t.push.apply(t,s(r));else{e={path:l,element:e};var u=s(r);u.length&&(e.children=u),t.push(e)}}}),t}function p(){return n.useContext(l).location}function h(){let{pathname:e}=n.useContext(u),t=n.useContext(l);null==t&&r(!1);let{history:a,pending:i}=t,o=n.useRef(!1);return n.useEffect(()=>{o.current=!0}),n.useCallback((t,{replace:n,state:r}={})=>{o.current&&("number"==typeof t?a.go(t):(t=v(t,e),a[n||i?"replace":"push"](t,r)))},[a,e,i])}function f(){return n.useContext(u).outlet}function m(e){let{pathname:t}=n.useContext(u);return n.useMemo(()=>v(e,t),[e,t])}function g(e,t="",r=!1){let{params:l,pathname:a}=n.useContext(u);t=t?[a,t].join("/").replace(/\/\/+/g,"/"):a;let i=p(),o=n.useMemo(()=>d(e,i,t,r),[e,i,t,r]);return o?o.reduceRight((e,{params:r,pathname:a,route:i})=>n.createElement(u.Provider,{children:i.element,value:{outlet:e,params:{...l,...r},pathname:[t,a].join("/").replace(/\/\/+/g,"/"),route:i}}),null):null}function d(e,n,r="",l=!1){"string"==typeof n&&(n=t(n)),r=r.replace(/^\/+|\/+$/g,"");let u=n.pathname.slice(1);if(r)if(r===u)u="";else{if(!u.startsWith(r))return null;u=u.slice(r.length).replace(/^\/+/,"")}for(function(e){let t=e.reduce((e,[t])=>(e[t]=function(e){let t=(e=e.split("/")).length;return e.some(C)&&(t+=-2),e.filter(e=>"*"!==e).reduce((e,t)=>e+(x.test(t)?2:""===t?1:10),t)}(t),e),{});e.sort((e,n)=>{let[r,,l]=e;e=t[r];let[u,,a]=n;return e!==(n=t[u])?n-e:function(e,t){return e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n])?e[e.length-1]-t[t.length-1]:0}(l,a)})}(e=function e(t,n=[],r="",l=[],u=[]){return t.forEach((t,a)=>{let i=[r,t.path].join("/").replace(/\/\/+/g,"/"),o=l.concat(t);a=u.concat(a),n.push([i,o,a]),t.children&&e(t.children,n,i,o,a)}),n}(e)),n=0;n<e.length;++n){let[t,a]=e[n];if([r]=y(t,!0,l),r.test(u))return a.map((e,t)=>{t=a.slice(0,t+1).map(e=>e.path).join("/").replace(/\/\/+/g,"/");let[n,r]=y(t,!1,l),i="/"+(t=u.match(n))[1],o=t.slice(2);return{params:r.reduce((e,t,n)=>{n=o[n];try{var r=decodeURIComponent(n.replace(/\+/g," "))}catch(l){r=n}return e[t]=r,e},{}),pathname:i,route:e}})}return null}let x=/^:\w+$/,C=e=>"*"===e;function y(e,t,n){let r=[],l="^("+e.replace(/^\/+/,"").replace(/\*\//g,"").replace(/\/?\*?$/,"").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(e,t)=>(r.push(t),"([^\\/]+)"))+")";return e.endsWith("*")?(e.endsWith("/*")&&(l+="\\/?"),r.push("*"),l+="(.*)"):t&&(l+="\\/?"),t&&(l+="$"),[new RegExp(l,n?void 0:"i"),r]}function E(e,t){let n=t.replace(/\/+$/,"").replace(/\/\/+/g,"/").split("/");return e.replace(/\/\/+/g,"/").split("/").forEach(e=>{".."===e?1<n.length&&n.pop():"."!==e&&n.push(e)}),1<n.length?n.join("/").replace(/\/\/+/g,"/"):"/"}function v(e,n="/"){let{pathname:r,search:l="",hash:u=""}="string"==typeof e?t(e):e;return{pathname:r?r.startsWith("/")?E(r,"/"):E(r,n):n,search:l,hash:u}}function R({children:t,initialEntries:r,initialIndex:l,timeout:u}){let a=n.useRef(null);return null==a.current&&(a.current=e({initialEntries:r,initialIndex:l})),n.createElement(c,{children:t,history:a.current,timeout:u})}function $({to:e,replace:t,state:u}){let a=h();return null==n.useContext(l)&&r(!1),n.useEffect(()=>{a(e,{replace:t,state:u})}),null}function j({element:e=n.createElement(a,null)}){return e}function w({basename:e="",caseSensitive:t=!1,children:n}){return g(n=s(n),e,t)}function b(e,t={}){return e.replace(/:(\w+)/g,(e,n)=>t[n]||`:${n}`).replace(/\*$/,e=>t[e]||e)}function W(e,t=!0){let u=n.useContext(l);null==u&&r(!1);let{history:a}=u;n.useEffect(()=>{if(t){let t=a.block(n=>{e({...n,retry(){t(),n.retry()}})});return t}},[a,t,e])}function I(e){e=m(e);let t=n.useContext(l);return null==t&&r(!1),t.history.createHref(e)}function L(e){let t=p();return e=m(e),t.pathname===e.pathname}function M(){return n.useContext(u).params}export{R as MemoryRouter,$ as Navigate,a as Outlet,j as Route,c as Router,w as Routes,s as createRoutesFromChildren,b as generatePath,d as matchRoutes,v as resolveLocation,W as useBlocker,I as useHref,p as useLocation,L as useMatch,h as useNavigate,f as useOutlet,M as useParams,m as useResolvedLocation,g as useRoutes};
//# sourceMappingURL=react-router.production.min.js.map
